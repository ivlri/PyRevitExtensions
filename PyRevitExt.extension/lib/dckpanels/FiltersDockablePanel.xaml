<Page xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:av="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      mc:Ignorable="av"
      Background="White">

    <Page.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
    </Page.Resources>

    <Grid Margin="5">
        <!-- Ð¡Ð¿Ð¸ÑÐ¾Ðº Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð¾Ð² Ñ Ð³Ñ€ÑƒÐ¿Ð¿Ð¸Ñ€Ð¾Ð²ÐºÐ¾Ð¹ -->
        <Border BorderBrush="#CCCCCC" BorderThickness="1" CornerRadius="4" Padding="12" 
                Background="White"
                Grid.Row="0">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº Ð¸ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ -->
                <Grid Grid.Row="0" Margin="0,0,0,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº ÑÐ»ÐµÐ²Ð° -->
                    <TextBlock Text="Ð¤Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹ Ð²Ð¸Ð´Ð°" 
                               FontWeight="SemiBold" FontSize="11"
                               Foreground="#666666"
                               Grid.Column="0" VerticalAlignment="Center"
                               HorizontalAlignment="Left"/>

                    <!-- ÐšÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€ Ð´Ð»Ñ ÐºÐ½Ð¾Ð¿Ð¾Ðº ÑÐ¿Ñ€Ð°Ð²Ð° -->
                    <StackPanel Grid.Column="1" 
                                Orientation="Horizontal" 
                                HorizontalAlignment="Right"
                                VerticalAlignment="Center">

                        <Button x:Name="BtnExpandAll" Content="Ð Ð°Ð·Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒ"
                                Click="btn_expand_all_click" Margin="0,0,5,0"
                                Background="Transparent" BorderBrush="#CCCCCC" BorderThickness="1"
                                Padding="8,4" FontSize="10"/>

                        <Button x:Name="BtnCollapseAll" Content="Ð¡Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒ"
                                Click="btn_collapse_all_click"
                                Background="Transparent" BorderBrush="#CCCCCC" BorderThickness="1"
                                Padding="8,4" FontSize="10"/>
                    </StackPanel>
                </Grid>

                <TreeView x:Name="FiltersTreeView" 
                            Margin="0,0,0,10" Background="White" Grid.Row="2">
                    <TreeView.ItemContainerStyle>
                        <Style TargetType="TreeViewItem">
                            <Setter Property="Padding" Value="4,2"/>
                            <Setter Property="Margin" Value="0"/>
                            <Setter Property="BorderThickness" Value="0"/>
                            <Setter Property="VerticalContentAlignment" Value="Center"/>
                            <Setter Property="IsExpanded" Value="{Binding IsExpanded, Mode=TwoWay}"/>
                            <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                        </Style>
                    </TreeView.ItemContainerStyle>

                    <TreeView.ItemTemplate>
                        <HierarchicalDataTemplate ItemsSource="{Binding Children}">
                            <Grid>
                                <!-- Ð”Ð»Ñ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¹ (Ð³Ñ€ÑƒÐ¿Ð¿) ÑƒÑ€Ð¾Ð²Ð½Ñ 1 -->
                                <Grid Visibility="{Binding IsCategory, Converter={StaticResource BoolToVisibilityConverter}}">
                                    <TextBlock Text="{Binding Name}" 
                                                VerticalAlignment="Center" 
                                                FontWeight="SemiBold" 
                                                FontSize="11"
                                                Foreground="#2D2D30"/>
                                </Grid>

                                <!-- Ð”Ð»Ñ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð¾Ð² ÑƒÑ€Ð¾Ð²Ð½Ñ 2 -->
                                <Grid Visibility="{Binding IsFilter, Converter={StaticResource BoolToVisibilityConverter}}">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ -->
                                            <ColumnDefinition Width="150"/>
                                            <!-- ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð° -->
                                            <ColumnDefinition Width="Auto"/>
                                            <!-- Ð§ÐµÐºÐ±Ð¾ÐºÑÑ‹ -->
                                        </Grid.ColumnDefinitions>

                                        <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð° -->
                                        <Button Grid.Column="0"
                                                Click="btn_delete_filter_click"
                                                Background="Transparent"
                                                BorderThickness="0"
                                                Padding="2"
                                                Margin="-30,0,5,0"
                                                Width="16" Height="16"
                                                VerticalAlignment="Center"
                                                ToolTip="Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€ Ð¸Ð· Ð²Ð¸Ð´Ð°">
                                            <Button.Content>
                                                <TextBlock Text="ðŸ—‘ï¸" 
                                                           FontSize="9"
                                                           VerticalAlignment="Center"
                                                           HorizontalAlignment="Center"/>
                                            </Button.Content>
                                        </Button>

                                        <!-- ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð° -->
                                        <TextBlock Grid.Column="1" 
                                                    Text="{Binding Name}" 
                                                    VerticalAlignment="Center" 
                                                    FontSize="11"
                                                    Foreground="#2D2D30"
                                                    Margin="0,0,10,0"/>

                                        <!-- ÐšÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€ Ð´Ð»Ñ Ñ‡ÐµÐºÐ±Ð¾ÐºÑÐ¾Ð² Ñ Ð²Ñ‹Ñ€Ð°Ð²Ð½Ð¸Ð²Ð°Ð½Ð¸ÐµÐ¼ Ð¿Ð¾ Ð¿Ñ€Ð°Ð²Ð¾Ð¼Ñƒ ÐºÑ€Ð°ÑŽ -->
                                        <StackPanel Grid.Column="2" 
                                                    Orientation="Horizontal" 
                                                    HorizontalAlignment="Right"
                                                    VerticalAlignment="Center">

                                            <!-- Ð§ÐµÐºÐ±Ð¾ÐºÑ Ð²ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ/Ð²Ñ‹ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð° -->
                                            <CheckBox IsChecked="{Binding IsFilterEnabled, Mode=TwoWay}"
                                                        VerticalAlignment="Center"
                                                        VerticalContentAlignment="Center"
                                                        Margin="0,0,10,0"
                                                        Checked="filter_enabled_checked"
                                                        Unchecked="filter_enabled_unchecked"
                                                        Focusable="False"
                                                        ToolTip="Ð’ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ/Ð²Ñ‹ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€">
                                                <CheckBox.Content>
                                                    <TextBlock Text="Ð’ÐºÐ»" FontSize="9"
                                                                Foreground="#666666"
                                                                VerticalAlignment="Center"/>
                                                </CheckBox.Content>
                                            </CheckBox>

                                            <!-- Ð§ÐµÐºÐ±Ð¾ÐºÑ Ð²Ð¸Ð´Ð¸Ð¼Ð¾ÑÑ‚Ð¸ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð° -->
                                            <CheckBox IsChecked="{Binding FilterVisibility, Mode=TwoWay}"
                                                        VerticalAlignment="Center"
                                                        VerticalContentAlignment="Center"
                                                        Checked="filter_visibility_checked"
                                                        Unchecked="filter_visibility_unchecked"
                                                        Focusable="False"
                                                        ToolTip="Ð’Ð¸Ð´Ð¸Ð¼Ð¾ÑÑ‚ÑŒ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð°">
                                                <CheckBox.Content>
                                                    <TextBlock Text="Ð’Ð¸Ð´Ð¸Ð¼Ð¾ÑÑ‚ÑŒ" FontSize="9"
                                                                    Foreground="#666666"
                                                                    VerticalAlignment="Center"/>
                                                </CheckBox.Content>
                                            </CheckBox>
                                        </StackPanel>
                                    </Grid>
                                </Grid>
                            </Grid>
                        </HierarchicalDataTemplate>
                    </TreeView.ItemTemplate>
                </TreeView>

                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Grid.Row="3">
                    <Button x:Name="BtnAddFilters" Content="Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€"
                        Click="btn_add_filters" Margin="0,0,8,0" Padding="15,8"
                        Background="#5F9EA0" Foreground="White" BorderThickness="0"
                        FontWeight="SemiBold"/>
                    <Button x:Name="BtnRefresh" Content="ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð¿Ð°Ð½ÐµÐ»ÑŒ"
                        Click="btn_refresh_panel" Margin="0,0,0,0" Padding="15,8"
                        Background="#5F9EA0" Foreground="White" BorderThickness="0"
                        FontWeight="SemiBold"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Page>